2025-10-30 09:32:12.603 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-30 09:32:12.645 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Starting MovieRatingServiceApplication using Java 21.0.8 with PID 819739 (/home/getch/Documents/java-workspace/movie-rating-service/target/classes started by getch in /home/getch/Documents/java-workspace/movie-rating-service)
2025-10-30 09:32:12.646 [restartedMain] DEBUG c.s.m.MovieRatingServiceApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 09:32:12.646 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - The following 1 profile is active: "dev"
2025-10-30 09:32:12.687 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-30 09:32:12.687 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-30 09:32:12.700 [restartedMain] INFO  o.s.b.d.c.l.DockerComposeLifecycleManager - Using Docker Compose file /home/getch/Documents/java-workspace/movie-rating-service/docker-compose.yaml
2025-10-30 09:32:15.947 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli - time="2025-10-30T09:32:15+01:00" level=warning msg="Found orphan containers ([movie-rating-app movie-rating-grafana movie-rating-prometheus movie-rating-zipkin]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
2025-10-30 09:32:15.949 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Created
2025-10-30 09:32:15.957 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Starting
2025-10-30 09:32:16.596 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Started
2025-10-30 09:32:16.596 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Waiting
2025-10-30 09:32:27.097 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Healthy
2025-10-30 09:32:28.115 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 09:32:28.151 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 28 ms. Found 3 JPA repository interfaces.
2025-10-30 09:32:29.064 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-30 09:32:29.073 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-30 09:32:29.074 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-30 09:32:29.074 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-30 09:32:29.107 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-30 09:32:29.108 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1630 ms
2025-10-30 09:32:30.049 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:32:30.144 [restartedMain] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-30 09:32:30.146 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:32:30.155 [restartedMain] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 09:32:30.155 [restartedMain] INFO  liquibase.util - Run:                          0
2025-10-30 09:32:30.155 [restartedMain] INFO  liquibase.util - Previously run:               8
2025-10-30 09:32:30.155 [restartedMain] INFO  liquibase.util - Filtered out:                 0
2025-10-30 09:32:30.155 [restartedMain] INFO  liquibase.util - -------------------------------
2025-10-30 09:32:30.155 [restartedMain] INFO  liquibase.util - Total change sets:            8
2025-10-30 09:32:30.155 [restartedMain] INFO  liquibase.util - Update summary generated
2025-10-30 09:32:30.156 [restartedMain] INFO  liquibase.command - Command execution complete
2025-10-30 09:32:30.616 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 09:32:30.659 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-30 09:32:30.688 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 09:32:30.918 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 09:32:30.947 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Starting...
2025-10-30 09:32:30.971 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingHikariPool - Added connection org.postgresql.jdbc.PgConnection@3ff63f52
2025-10-30 09:32:30.972 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Start completed.
2025-10-30 09:32:30.995 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-30 09:32:31.009 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingHikariPool)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 09:32:31.799 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 09:32:31.814 [restartedMain] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@8ea37a] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
2025-10-30 09:32:31.839 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:32:32.125 [restartedMain] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 09:32:32.126 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-10-30 09:32:32.234 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 09:32:32.288 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-30 09:32:33.630 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 17 mappings in 'requestMappingHandlerMapping'
2025-10-30 09:32:33.718 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-10-30 09:32:33.973 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-10-30 09:32:34.164 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 09:32:34.302 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-30 09:32:34.355 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-30 09:32:34.770 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-30 09:32:34.880 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-30 09:32:34.900 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-30 09:32:34.929 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Started MovieRatingServiceApplication in 22.841 seconds (process running for 24.229)
2025-10-30 09:32:35.451 [RMI TCP Connection(2)-192.168.1.57] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-30 09:32:35.452 [RMI TCP Connection(2)-192.168.1.57] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-30 09:32:35.452 [RMI TCP Connection(2)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-30 09:32:35.452 [RMI TCP Connection(2)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-30 09:32:35.452 [RMI TCP Connection(2)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-30 09:32:35.456 [RMI TCP Connection(2)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@5abecc82
2025-10-30 09:32:35.457 [RMI TCP Connection(2)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@785611
2025-10-30 09:32:35.458 [RMI TCP Connection(2)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-30 09:32:35.458 [RMI TCP Connection(2)-192.168.1.57] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 6 ms
2025-10-30 09:32:37.738 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-10-30 09:32:37.759 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:37.769 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-10-30 09:32:37.771 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-10-30 09:32:37.775 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:37.802 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:37.945 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-10-30 09:32:37.954 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:37.956 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-10-30 09:32:37.957 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-10-30 09:32:37.958 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:37.979 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:37.983 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-10-30 09:32:37.985 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:32:37.987 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:37.988 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:37.988 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-10-30 09:32:37.988 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-10-30 09:32:37.988 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:32:37.989 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-10-30 09:32:37.989 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:37.992 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:37.998 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:38.011 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:38.021 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:32:38.022 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-10-30 09:32:38.023 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:38.023 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:38.024 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:32:38.024 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-10-30 09:32:38.024 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-10-30 09:32:38.024 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-10-30 09:32:38.025 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:38.025 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:38.032 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:38.053 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:38.617 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 67 class path changes (67 additions, 0 deletions, 0 modifications)
2025-10-30 09:32:38.637 [Thread-24] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-30 09:32:38.642 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-10-30 09:32:38.644 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-30 09:32:38.646 [Thread-24] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-10-30 09:32:38.878 [Thread-24] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:32:38.895 [Thread-24] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown initiated...
2025-10-30 09:32:38.901 [Thread-24] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown completed.
2025-10-30 09:32:40.356 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Starting MovieRatingServiceApplication using Java 21.0.8 with PID 819739 (/home/getch/Documents/java-workspace/movie-rating-service/target/classes started by getch in /home/getch/Documents/java-workspace/movie-rating-service)
2025-10-30 09:32:40.356 [restartedMain] DEBUG c.s.m.MovieRatingServiceApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 09:32:40.356 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - The following 1 profile is active: "dev"
2025-10-30 09:32:40.361 [restartedMain] INFO  o.s.b.d.c.l.DockerComposeLifecycleManager - Using Docker Compose file /home/getch/Documents/java-workspace/movie-rating-service/docker-compose.yaml
2025-10-30 09:32:43.484 [restartedMain] INFO  o.s.b.d.c.l.DockerComposeLifecycleManager - There are already Docker Compose services running, skipping startup
2025-10-30 09:32:43.725 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 09:32:43.731 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 3 JPA repository interfaces.
2025-10-30 09:32:43.936 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-30 09:32:43.937 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-30 09:32:43.937 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-30 09:32:43.937 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-30 09:32:43.943 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-30 09:32:43.943 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 455 ms
2025-10-30 09:32:44.137 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:32:44.174 [restartedMain] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-30 09:32:44.175 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:32:44.178 [restartedMain] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 09:32:44.179 [restartedMain] INFO  liquibase.util - Run:                          0
2025-10-30 09:32:44.179 [restartedMain] INFO  liquibase.util - Previously run:               8
2025-10-30 09:32:44.179 [restartedMain] INFO  liquibase.util - Filtered out:                 0
2025-10-30 09:32:44.179 [restartedMain] INFO  liquibase.util - -------------------------------
2025-10-30 09:32:44.179 [restartedMain] INFO  liquibase.util - Total change sets:            8
2025-10-30 09:32:44.179 [restartedMain] INFO  liquibase.util - Update summary generated
2025-10-30 09:32:44.179 [restartedMain] INFO  liquibase.command - Command execution complete
2025-10-30 09:32:44.207 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 09:32:44.209 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 09:32:44.218 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 09:32:44.218 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Starting...
2025-10-30 09:32:44.236 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingHikariPool - Added connection org.postgresql.jdbc.PgConnection@63658db6
2025-10-30 09:32:44.237 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Start completed.
2025-10-30 09:32:44.239 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-30 09:32:44.241 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingHikariPool)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 09:32:44.317 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 09:32:44.318 [restartedMain] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@52c5c463] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
2025-10-30 09:32:44.331 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:32:44.399 [restartedMain] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 09:32:44.399 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-10-30 09:32:44.450 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 09:32:47.848 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 17 mappings in 'requestMappingHandlerMapping'
2025-10-30 09:32:47.878 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-10-30 09:32:47.999 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-10-30 09:32:48.086 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 09:32:48.127 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-30 09:32:48.142 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-30 09:32:48.270 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-30 09:32:48.289 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-30 09:32:48.290 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-30 09:32:48.296 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Started MovieRatingServiceApplication in 7.995 seconds (process running for 37.596)
2025-10-30 09:32:48.300 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-30 09:32:48.742 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-30 09:32:48.743 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-30 09:32:48.743 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-30 09:32:48.743 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-30 09:32:48.743 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-30 09:32:48.746 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@65ffe607
2025-10-30 09:32:48.748 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@364fa386
2025-10-30 09:32:48.748 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-30 09:32:48.748 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-10-30 09:32:48.753 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-10-30 09:32:48.758 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:48.760 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-10-30 09:32:48.761 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-10-30 09:32:48.762 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:48.766 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:48.856 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-10-30 09:32:48.859 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:48.862 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-10-30 09:32:48.863 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-10-30 09:32:48.865 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:48.873 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:48.876 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-10-30 09:32:48.877 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:48.884 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-10-30 09:32:48.884 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-10-30 09:32:48.885 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:48.885 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:32:48.892 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:48.894 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-10-30 09:32:48.892 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:32:48.895 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:48.896 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:32:48.896 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-10-30 09:32:48.896 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:48.897 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:48.894 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:32:48.899 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-10-30 09:32:48.895 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:48.900 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:48.901 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-10-30 09:32:48.901 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-10-30 09:32:48.902 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:48.906 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:48.906 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:48.915 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:49.924 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v3/api-docs/swagger-config
2025-10-30 09:32:49.926 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:49.975 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v3/api-docs/swagger-config
2025-10-30 09:32:49.975 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/v3/api-docs/swagger-config", parameters={}
2025-10-30 09:32:49.976 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-10-30 09:32:50.020 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-10-30 09:32:50.022 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:50.024 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-10-30 09:32:50.024 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-10-30 09:32:50.025 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:32:50.041 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:50.388 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-10-30 09:32:50.397 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2025-10-30 09:32:50.802 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:32:51.157 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-10-30 09:32:51.157 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 10 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 10 common frames omitted
2025-10-30 09:32:51.571 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v3/api-docs
2025-10-30 09:32:51.574 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:32:51.575 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v3/api-docs
2025-10-30 09:32:51.575 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/v3/api-docs", parameters={}
2025-10-30 09:32:51.575 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-10-30 09:32:52.576 [http-nio-8080-exec-9] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 832 ms
2025-10-30 09:32:52.605 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-10-30 09:32:52.607 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-10-30 09:32:52.608 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:34:25.779 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-30 09:34:25.782 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-30 09:34:25.787 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:34:25.788 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown initiated...
2025-10-30 09:34:25.789 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown completed.
2025-10-30 09:34:35.710 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-30 09:34:35.745 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Starting MovieRatingServiceApplication using Java 21.0.8 with PID 821342 (/home/getch/Documents/java-workspace/movie-rating-service/target/classes started by getch in /home/getch/Documents/java-workspace/movie-rating-service)
2025-10-30 09:34:35.746 [restartedMain] DEBUG c.s.m.MovieRatingServiceApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 09:34:35.746 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - The following 1 profile is active: "dev"
2025-10-30 09:34:35.781 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-30 09:34:35.781 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-30 09:34:35.792 [restartedMain] INFO  o.s.b.d.c.l.DockerComposeLifecycleManager - Using Docker Compose file /home/getch/Documents/java-workspace/movie-rating-service/docker-compose.yaml
2025-10-30 09:34:36.556 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli - time="2025-10-30T09:34:36+01:00" level=warning msg="Found orphan containers ([movie-rating-app movie-rating-grafana movie-rating-prometheus movie-rating-zipkin]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
2025-10-30 09:34:36.557 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Created
2025-10-30 09:34:36.563 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Starting
2025-10-30 09:34:37.279 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Started
2025-10-30 09:34:37.279 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Waiting
2025-10-30 09:34:47.780 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Healthy
2025-10-30 09:34:49.297 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 09:34:49.334 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 3 JPA repository interfaces.
2025-10-30 09:34:50.423 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-30 09:34:50.432 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-30 09:34:50.433 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-30 09:34:50.433 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-30 09:34:50.460 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-30 09:34:50.460 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2007 ms
2025-10-30 09:34:51.447 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:34:51.535 [restartedMain] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-30 09:34:51.536 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:34:51.544 [restartedMain] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 09:34:51.544 [restartedMain] INFO  liquibase.util - Run:                          0
2025-10-30 09:34:51.544 [restartedMain] INFO  liquibase.util - Previously run:               8
2025-10-30 09:34:51.544 [restartedMain] INFO  liquibase.util - Filtered out:                 0
2025-10-30 09:34:51.544 [restartedMain] INFO  liquibase.util - -------------------------------
2025-10-30 09:34:51.544 [restartedMain] INFO  liquibase.util - Total change sets:            8
2025-10-30 09:34:51.544 [restartedMain] INFO  liquibase.util - Update summary generated
2025-10-30 09:34:51.545 [restartedMain] INFO  liquibase.command - Command execution complete
2025-10-30 09:34:52.195 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 09:34:52.240 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-30 09:34:52.268 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 09:34:52.578 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 09:34:52.602 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Starting...
2025-10-30 09:34:52.626 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingHikariPool - Added connection org.postgresql.jdbc.PgConnection@3a21dd54
2025-10-30 09:34:52.627 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Start completed.
2025-10-30 09:34:52.648 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-30 09:34:52.662 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingHikariPool)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 09:34:53.498 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 09:34:53.519 [restartedMain] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@3f9610ee] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
2025-10-30 09:34:53.554 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:34:54.001 [restartedMain] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 09:34:54.002 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-10-30 09:34:54.099 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 09:34:54.138 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-30 09:34:55.157 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 17 mappings in 'requestMappingHandlerMapping'
2025-10-30 09:34:55.200 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-10-30 09:34:55.326 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-10-30 09:34:55.460 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 09:34:55.542 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-30 09:34:55.586 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-30 09:34:55.867 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-30 09:34:55.924 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-30 09:34:55.932 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-30 09:34:55.944 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Started MovieRatingServiceApplication in 20.688 seconds (process running for 21.73)
2025-10-30 09:34:56.376 [RMI TCP Connection(3)-192.168.1.57] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-30 09:34:56.378 [RMI TCP Connection(3)-192.168.1.57] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-30 09:34:56.380 [RMI TCP Connection(3)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-30 09:34:56.380 [RMI TCP Connection(3)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-30 09:34:56.380 [RMI TCP Connection(3)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-30 09:34:56.382 [RMI TCP Connection(3)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1d517cb9
2025-10-30 09:34:56.383 [RMI TCP Connection(3)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@74c3d759
2025-10-30 09:34:56.384 [RMI TCP Connection(3)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-30 09:34:56.384 [RMI TCP Connection(3)-192.168.1.57] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-10-30 09:35:26.875 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-10-30 09:35:26.921 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:26.939 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-10-30 09:35:26.945 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-10-30 09:35:26.957 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:35:27.026 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:27.480 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-10-30 09:35:27.483 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:27.487 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-10-30 09:35:27.488 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-10-30 09:35:27.489 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:35:27.495 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:27.610 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-10-30 09:35:27.610 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:35:27.612 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:27.613 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:35:27.615 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:27.616 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:27.618 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:35:27.618 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-10-30 09:35:27.619 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:35:27.620 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:35:27.620 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-10-30 09:35:27.619 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-10-30 09:35:27.621 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-10-30 09:35:27.624 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:35:27.625 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:35:27.641 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:27.641 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:27.645 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-10-30 09:35:27.649 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:27.652 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-10-30 09:35:27.652 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-10-30 09:35:27.653 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:35:27.661 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:27.711 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:29.919 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v3/api-docs/swagger-config
2025-10-30 09:35:29.922 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:29.923 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v3/api-docs/swagger-config
2025-10-30 09:35:29.923 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/v3/api-docs/swagger-config", parameters={}
2025-10-30 09:35:29.924 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-10-30 09:35:29.975 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-10-30 09:35:29.985 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2025-10-30 09:35:29.990 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-10-30 09:35:29.991 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:29.992 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-10-30 09:35:29.992 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-10-30 09:35:29.993 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:35:29.994 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:29.995 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:30.989 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v3/api-docs
2025-10-30 09:35:30.991 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:35:31.001 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v3/api-docs
2025-10-30 09:35:31.002 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/v3/api-docs", parameters={}
2025-10-30 09:35:31.002 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-10-30 09:35:31.506 [http-nio-8080-exec-9] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 427 ms
2025-10-30 09:35:31.536 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-10-30 09:35:31.538 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-10-30 09:35:31.539 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:35:32.069 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  z.r.i.AsyncReporter$BoundedAsyncReporter - Spans were dropped due to exceptions. All subsequent errors will be logged at FINE level.
2025-10-30 09:35:32.069 [AsyncReporter{ZipkinHttpClientSender{http://localhost:9411/api/v2/spans}}] WARN  z.r.i.AsyncReporter$BoundedAsyncReporter - Dropped 5 spans due to ConnectException()
java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.HttpClientImpl.send(HttpClientImpl.java:955)
	at java.net.http/jdk.internal.net.http.HttpClientFacade.send(HttpClientFacade.java:133)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.ZipkinHttpClientSender.postSpans(ZipkinHttpClientSender.java:60)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:69)
	at org.springframework.boot.actuate.autoconfigure.tracing.zipkin.HttpSender.postSpans(HttpSender.java:41)
	at zipkin2.reporter.BaseHttpSender.send(BaseHttpSender.java:123)
	at zipkin2.reporter.internal.AsyncReporter$BoundedAsyncReporter.flush(AsyncReporter.java:266)
	at zipkin2.reporter.internal.AsyncReporter$Flusher.run(AsyncReporter.java:352)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: null
	at java.net.http/jdk.internal.net.http.common.Utils.toConnectException(Utils.java:1065)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:227)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.checkRetryConnect(PlainHttpConnection.java:280)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$2(PlainHttpConnection.java:238)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	... 1 common frames omitted
Caused by: java.nio.channels.ClosedChannelException: null
	at java.base/sun.nio.ch.SocketChannelImpl.ensureOpen(SocketChannelImpl.java:202)
	at java.base/sun.nio.ch.SocketChannelImpl.beginConnect(SocketChannelImpl.java:786)
	at java.base/sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:874)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.lambda$connectAsync$1(PlainHttpConnection.java:210)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:571)
	at java.net.http/jdk.internal.net.http.PlainHttpConnection.connectAsync(PlainHttpConnection.java:212)
	... 10 common frames omitted
2025-10-30 09:37:13.018 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-30 09:37:13.021 [Thread-24] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-30 09:37:13.022 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-10-30 09:37:13.023 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-30 09:37:13.024 [Thread-24] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-10-30 09:37:13.032 [Thread-24] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:37:13.036 [Thread-24] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown initiated...
2025-10-30 09:37:13.038 [Thread-24] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown completed.
2025-10-30 09:37:13.269 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Starting MovieRatingServiceApplication using Java 21.0.8 with PID 821342 (/home/getch/Documents/java-workspace/movie-rating-service/target/classes started by getch in /home/getch/Documents/java-workspace/movie-rating-service)
2025-10-30 09:37:13.270 [restartedMain] DEBUG c.s.m.MovieRatingServiceApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 09:37:13.270 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - The following 1 profile is active: "dev"
2025-10-30 09:37:13.275 [restartedMain] INFO  o.s.b.d.c.l.DockerComposeLifecycleManager - Using Docker Compose file /home/getch/Documents/java-workspace/movie-rating-service/docker-compose.yaml
2025-10-30 09:37:16.165 [restartedMain] INFO  o.s.b.d.c.l.DockerComposeLifecycleManager - There are already Docker Compose services running, skipping startup
2025-10-30 09:37:16.353 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 09:37:16.359 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 3 JPA repository interfaces.
2025-10-30 09:37:16.563 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-30 09:37:16.564 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-30 09:37:16.564 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-30 09:37:16.564 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-30 09:37:16.570 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-30 09:37:16.570 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 403 ms
2025-10-30 09:37:16.765 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:37:16.811 [restartedMain] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-30 09:37:16.812 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.util - Run:                          0
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.util - Previously run:               8
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.util - Filtered out:                 0
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.util - -------------------------------
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.util - Total change sets:            8
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.util - Update summary generated
2025-10-30 09:37:16.817 [restartedMain] INFO  liquibase.command - Command execution complete
2025-10-30 09:37:16.845 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 09:37:16.846 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 09:37:16.852 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 09:37:16.853 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Starting...
2025-10-30 09:37:16.882 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingHikariPool - Added connection org.postgresql.jdbc.PgConnection@69529e8
2025-10-30 09:37:16.883 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Start completed.
2025-10-30 09:37:16.886 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-30 09:37:16.887 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingHikariPool)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 09:37:16.962 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 09:37:16.962 [restartedMain] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@493340db] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
2025-10-30 09:37:16.975 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:37:17.043 [restartedMain] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 09:37:17.044 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-10-30 09:37:17.094 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 09:37:17.233 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 17 mappings in 'requestMappingHandlerMapping'
2025-10-30 09:37:17.257 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-10-30 09:37:17.325 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-10-30 09:37:17.379 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 09:37:17.414 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-30 09:37:17.426 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-30 09:37:17.533 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-30 09:37:17.551 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-30 09:37:17.552 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-30 09:37:17.558 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Started MovieRatingServiceApplication in 4.347 seconds (process running for 163.344)
2025-10-30 09:37:17.560 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-10-30 09:38:10.383 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-30 09:38:10.385 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-30 09:38:10.389 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:38:10.389 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown initiated...
2025-10-30 09:38:10.390 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown completed.
2025-10-30 09:38:15.435 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-30 09:38:15.471 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Starting MovieRatingServiceApplication using Java 21.0.8 with PID 823248 (/home/getch/Documents/java-workspace/movie-rating-service/target/classes started by getch in /home/getch/Documents/java-workspace/movie-rating-service)
2025-10-30 09:38:15.471 [restartedMain] DEBUG c.s.m.MovieRatingServiceApplication - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 09:38:15.471 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - The following 1 profile is active: "dev"
2025-10-30 09:38:15.505 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-30 09:38:15.505 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-30 09:38:15.515 [restartedMain] INFO  o.s.b.d.c.l.DockerComposeLifecycleManager - Using Docker Compose file /home/getch/Documents/java-workspace/movie-rating-service/docker-compose.yaml
2025-10-30 09:38:16.172 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli - time="2025-10-30T09:38:16+01:00" level=warning msg="Found orphan containers ([movie-rating-app movie-rating-grafana movie-rating-prometheus]) for this project. If you removed or renamed this service in your compose file, you can run this command with the --remove-orphans flag to clean it up."
2025-10-30 09:38:16.172 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Created
2025-10-30 09:38:16.172 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-zipkin  Created
2025-10-30 09:38:16.176 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-zipkin  Starting
2025-10-30 09:38:16.177 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Starting
2025-10-30 09:38:16.808 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-zipkin  Started
2025-10-30 09:38:16.839 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Started
2025-10-30 09:38:16.839 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-zipkin  Waiting
2025-10-30 09:38:16.839 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Waiting
2025-10-30 09:38:22.341 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-zipkin  Healthy
2025-10-30 09:38:27.341 [OutputReader-stderr] INFO  o.s.b.docker.compose.core.DockerCli -  Container movie-rating-postgres  Healthy
2025-10-30 09:38:28.649 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 09:38:28.687 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 29 ms. Found 3 JPA repository interfaces.
2025-10-30 09:38:29.642 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-10-30 09:38:29.652 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-10-30 09:38:29.653 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-30 09:38:29.653 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.48]
2025-10-30 09:38:29.683 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-30 09:38:29.683 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1748 ms
2025-10-30 09:38:30.653 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:38:30.737 [restartedMain] INFO  liquibase.ui - Database is up to date, no changesets to execute
2025-10-30 09:38:30.738 [restartedMain] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 09:38:30.746 [restartedMain] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 09:38:30.746 [restartedMain] INFO  liquibase.util - Run:                          0
2025-10-30 09:38:30.746 [restartedMain] INFO  liquibase.util - Previously run:               8
2025-10-30 09:38:30.746 [restartedMain] INFO  liquibase.util - Filtered out:                 0
2025-10-30 09:38:30.746 [restartedMain] INFO  liquibase.util - -------------------------------
2025-10-30 09:38:30.746 [restartedMain] INFO  liquibase.util - Total change sets:            8
2025-10-30 09:38:30.747 [restartedMain] INFO  liquibase.util - Update summary generated
2025-10-30 09:38:30.747 [restartedMain] INFO  liquibase.command - Command execution complete
2025-10-30 09:38:31.176 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 09:38:31.231 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-30 09:38:31.260 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 09:38:31.504 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 09:38:31.536 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Starting...
2025-10-30 09:38:31.559 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingHikariPool - Added connection org.postgresql.jdbc.PgConnection@313ce036
2025-10-30 09:38:31.560 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Start completed.
2025-10-30 09:38:31.590 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-30 09:38:31.605 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingHikariPool)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 09:38:32.402 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 09:38:32.417 [restartedMain] INFO  o.hibernate.orm.connections.access - HHH10001501: Connection obtained from JdbcConnectionAccess [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess@2c0237fc] for (non-JTA) DDL execution was not in auto-commit mode; the Connection 'local transaction' will be committed and the Connection will be set into auto-commit mode.
2025-10-30 09:38:32.442 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:38:32.740 [restartedMain] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 09:38:32.741 [restartedMain] DEBUG o.s.w.f.ServerHttpObservationFilter - Filter 'webMvcObservationFilter' configured for use
2025-10-30 09:38:32.849 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 09:38:32.892 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-30 09:38:34.276 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - 17 mappings in 'requestMappingHandlerMapping'
2025-10-30 09:38:34.322 [restartedMain] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Patterns [/webjars/**, /**, /swagger-ui*/*swagger-initializer.js, /swagger-ui*/**] in 'resourceHandlerMapping'
2025-10-30 09:38:34.458 [restartedMain] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 6 endpoints beneath base path '/actuator'
2025-10-30 09:38:34.572 [restartedMain] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 09:38:34.653 [restartedMain] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerAdapter - ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2025-10-30 09:38:34.697 [restartedMain] DEBUG o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - ControllerAdvice beans: 2 @ExceptionHandler, 1 ResponseBodyAdvice
2025-10-30 09:38:34.930 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-10-30 09:38:34.984 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-10-30 09:38:34.992 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-10-30 09:38:35.005 [restartedMain] INFO  c.s.m.MovieRatingServiceApplication - Started MovieRatingServiceApplication in 19.98 seconds (process running for 21.047)
2025-10-30 09:38:35.137 [RMI TCP Connection(4)-192.168.1.57] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-30 09:38:35.138 [RMI TCP Connection(4)-192.168.1.57] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-10-30 09:38:35.138 [RMI TCP Connection(4)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected StandardServletMultipartResolver
2025-10-30 09:38:35.138 [RMI TCP Connection(4)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected AcceptHeaderLocaleResolver
2025-10-30 09:38:35.138 [RMI TCP Connection(4)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected FixedThemeResolver
2025-10-30 09:38:35.140 [RMI TCP Connection(4)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@69c4ae1e
2025-10-30 09:38:35.140 [RMI TCP Connection(4)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - Detected org.springframework.web.servlet.support.SessionFlashMapManager@63db5fc1
2025-10-30 09:38:35.141 [RMI TCP Connection(4)-192.168.1.57] DEBUG o.s.web.servlet.DispatcherServlet - enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2025-10-30 09:38:35.141 [RMI TCP Connection(4)-192.168.1.57] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-10-30 09:38:58.673 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.html
2025-10-30 09:38:58.687 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:38:58.694 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.html
2025-10-30 09:38:58.697 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.html", parameters={}
2025-10-30 09:38:58.700 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:38:58.717 [http-nio-8080-exec-1] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:38:58.983 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui.css
2025-10-30 09:38:58.985 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:38:58.986 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui.css
2025-10-30 09:38:58.986 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui.css", parameters={}
2025-10-30 09:38:58.987 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:38:58.991 [http-nio-8080-exec-2] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:38:59.059 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:38:59.059 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/index.css
2025-10-30 09:38:59.061 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:38:59.061 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:38:59.062 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:38:59.062 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/index.css
2025-10-30 09:38:59.063 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/index.css", parameters={}
2025-10-30 09:38:59.063 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:38:59.063 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-standalone-preset.js
2025-10-30 09:38:59.063 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-standalone-preset.js", parameters={}
2025-10-30 09:38:59.064 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:38:59.064 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:38:59.068 [http-nio-8080-exec-3] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:38:59.074 [http-nio-8080-exec-5] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:38:59.082 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-ui-bundle.js
2025-10-30 09:38:59.083 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-ui-bundle.js", parameters={}
2025-10-30 09:38:59.084 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:38:59.099 [http-nio-8080-exec-4] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:38:59.145 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/swagger-initializer.js
2025-10-30 09:38:59.151 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:38:59.155 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/swagger-initializer.js
2025-10-30 09:38:59.156 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/swagger-initializer.js", parameters={}
2025-10-30 09:38:59.157 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:38:59.200 [http-nio-8080-exec-6] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:39:00.953 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v3/api-docs/swagger-config
2025-10-30 09:39:00.956 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:39:00.958 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v3/api-docs/swagger-config
2025-10-30 09:39:00.959 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - GET "/v3/api-docs/swagger-config", parameters={}
2025-10-30 09:39:00.960 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.ui.SwaggerConfigResource#openapiJson(HttpServletRequest)
2025-10-30 09:39:01.077 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [*/*] and supported [application/json]
2025-10-30 09:39:01.089 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{configUrl=/v3/api-docs/swagger-config, oauth2RedirectUrl=http://localhost:8080/swagger-ui/oauth2-re (truncated)...]
2025-10-30 09:39:01.203 [http-nio-8080-exec-7] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:39:01.321 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /swagger-ui/favicon-32x32.png
2025-10-30 09:39:01.323 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:39:01.324 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /swagger-ui/favicon-32x32.png
2025-10-30 09:39:01.325 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - GET "/swagger-ui/favicon-32x32.png", parameters={}
2025-10-30 09:39:01.326 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.SimpleUrlHandlerMapping - Mapped to ResourceHttpRequestHandler [classpath [META-INF/resources/webjars/]]
2025-10-30 09:39:01.332 [http-nio-8080-exec-8] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:39:01.528 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /v3/api-docs
2025-10-30 09:39:01.531 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:39:01.533 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /v3/api-docs
2025-10-30 09:39:01.533 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - GET "/v3/api-docs", parameters={}
2025-10-30 09:39:01.534 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to org.springdoc.webmvc.api.OpenApiWebMvcResource#openapiJson(HttpServletRequest, String, Locale)
2025-10-30 09:39:02.635 [http-nio-8080-exec-9] INFO  o.s.api.AbstractOpenApiResource - Init duration for springdoc-openapi is: 939 ms
2025-10-30 09:39:02.660 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Using 'application/json', given [application/json, */*] and supported [application/json]
2025-10-30 09:39:02.662 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.m.a.RequestResponseBodyMethodProcessor - Writing [{123, 34, 111, 112, 101, 110, 97, 112, 105, 34, 58, 34, 51, 46, 49, 46, 48, 34, 44, 34, 105, 110, 10 (truncated)...]
2025-10-30 09:39:02.665 [http-nio-8080-exec-9] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:39:24.740 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/movies?page=0&size=20
2025-10-30 09:39:24.741 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 09:39:24.742 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/movies?page=0&size=20
2025-10-30 09:39:24.743 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - GET "/api/v1/movies?page=0&size=20", parameters={masked}
2025-10-30 09:39:24.744 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.RequestMappingHandlerMapping - Mapped to com.sky.movieratingservice.api.controller.MovieController#getAllMovies(int, int)
2025-10-30 09:39:24.784 [http-nio-8080-exec-10] DEBUG c.s.m.service.impl.MovieService - Fetching all movies - page: 0, size: 20
2025-10-30 09:39:24.844 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - 
    select
        m1_0.movie_id,
        m1_0.created_at,
        m1_0.description,
        m1_0.director,
        m1_0.genre,
        m1_0.name,
        m1_0.release_year,
        m1_0.updated_at 
    from
        movies m1_0 
    order by
        m1_0.name 
    offset
        ? rows 
    fetch
        first ? rows only
2025-10-30 09:39:24.905 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Using 'application/json', given [application/json] and supported [application/json]
2025-10-30 09:39:24.906 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.m.a.HttpEntityMethodProcessor - Writing [[MovieResponseDto(id=523e4567-e89b-12d3-a456-426614174000, name=Forrest Gump, description=The presid (truncated)...]
2025-10-30 09:39:24.908 [http-nio-8080-exec-10] DEBUG o.s.web.servlet.DispatcherServlet - Completed 200 OK
2025-10-30 09:39:58.757 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-10-30 09:39:58.761 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-10-30 09:39:58.782 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 09:39:58.791 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown initiated...
2025-10-30 09:39:58.794 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingHikariPool - Shutdown completed.
2025-10-30 11:39:05.214 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-30 11:39:05.246 [main] INFO  c.s.m.d.r.RatingRepositoryTest - Starting RatingRepositoryTest using Java 21.0.8 with PID 121991 (started by g-hailemariam in /home/g-hailemariam/Desktop/personel-projects/movie-rating-service)
2025-10-30 11:39:05.246 [main] DEBUG c.s.m.d.r.RatingRepositoryTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 11:39:05.247 [main] INFO  c.s.m.d.r.RatingRepositoryTest - The following 1 profile is active: "test"
2025-10-30 11:39:05.547 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 11:39:05.596 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 41 ms. Found 3 JPA repository interfaces.
2025-10-30 11:39:05.772 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Starting...
2025-10-30 11:39:05.893 [main] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingTestHikariPool - Added connection org.postgresql.jdbc.PgConnection@1cc9bd9b
2025-10-30 11:39:05.894 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Start completed.
2025-10-30 11:39:06.002 [main] INFO  liquibase.database - Set default schema name to public
2025-10-30 11:39:06.248 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
2025-10-30 11:39:06.277 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:39:06.340 [main] INFO  liquibase.snapshot - Creating snapshot
2025-10-30 11:39:06.442 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-10-30 11:39:06.443 [main] INFO  liquibase.command - Using deploymentId: 1820745758
2025-10-30 11:39:06.445 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:39:06.472 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam
2025-10-30 11:39:06.482 [main] INFO  liquibase.changelog - Table users created
2025-10-30 11:39:06.483 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam ran successfully in 10ms
2025-10-30 11:39:06.489 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam
2025-10-30 11:39:06.496 [main] INFO  liquibase.changelog - Table movies created
2025-10-30 11:39:06.497 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam ran successfully in 8ms
2025-10-30 11:39:06.501 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam
2025-10-30 11:39:06.506 [main] INFO  liquibase.changelog - Table ratings created
2025-10-30 11:39:06.510 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (user_id)
2025-10-30 11:39:06.513 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (movie_id)
2025-10-30 11:39:06.513 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam ran successfully in 12ms
2025-10-30 11:39:06.518 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam
2025-10-30 11:39:06.521 [main] INFO  liquibase.changelog - Index idx_users_email created
2025-10-30 11:39:06.522 [main] INFO  liquibase.changelog - Index idx_users_created_at created
2025-10-30 11:39:06.524 [main] INFO  liquibase.changelog - Index idx_movies_name created
2025-10-30 11:39:06.525 [main] INFO  liquibase.changelog - Index idx_movies_release_year created
2025-10-30 11:39:06.527 [main] INFO  liquibase.changelog - Index idx_ratings_user_id created
2025-10-30 11:39:06.529 [main] INFO  liquibase.changelog - Index idx_ratings_movie_id created
2025-10-30 11:39:06.530 [main] INFO  liquibase.changelog - Index idx_rating_movie_rating created
2025-10-30 11:39:06.532 [main] INFO  liquibase.changelog - Index idx_rating_created_at created
2025-10-30 11:39:06.532 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam ran successfully in 14ms
2025-10-30 11:39:06.534 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam
2025-10-30 11:39:06.537 [main] INFO  liquibase.changelog - Unique constraint added to ratings(user_id, movie_id)
2025-10-30 11:39:06.545 [main] INFO  liquibase.changelog - Custom SQL executed
2025-10-30 11:39:06.545 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam ran successfully in 11ms
2025-10-30 11:39:06.548 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam
2025-10-30 11:39:06.551 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:39:06.552 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:39:06.554 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:39:06.554 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam ran successfully in 5ms
2025-10-30 11:39:06.560 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam
2025-10-30 11:39:06.563 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:39:06.564 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:39:06.565 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:39:06.566 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:39:06.567 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:39:06.567 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam ran successfully in 6ms
2025-10-30 11:39:06.573 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 11:39:06.574 [main] INFO  liquibase.util - Run:                          7
2025-10-30 11:39:06.574 [main] INFO  liquibase.util - Previously run:               0
2025-10-30 11:39:06.574 [main] INFO  liquibase.util - Filtered out:                 1
2025-10-30 11:39:06.574 [main] INFO  liquibase.util - -------------------------------
2025-10-30 11:39:06.574 [main] INFO  liquibase.util - Total change sets:            8
2025-10-30 11:39:06.574 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-10-30 11:39:06.574 [main] INFO  liquibase.util - Context mismatch:             1
2025-10-30 11:39:06.575 [main] INFO  liquibase.util - Update summary generated
2025-10-30 11:39:06.578 [main] INFO  liquibase.command - Update command completed successfully.
2025-10-30 11:39:06.578 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 15
2025-10-30 11:39:06.580 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-10-30 11:39:06.581 [main] INFO  liquibase.command - Command execution complete
2025-10-30 11:39:07.161 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 11:39:07.195 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-30 11:39:07.215 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 11:39:07.392 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 11:39:07.462 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingTestHikariPool)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 11:39:08.085 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 11:39:08.087 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:39:08.320 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-30 11:39:09.084 [main] INFO  c.s.m.d.r.RatingRepositoryTest - Started RatingRepositoryTest in 4.198 seconds (process running for 7.596)
2025-10-30 11:39:09.479 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.488 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:39:09.492 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:39:09.494 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.500 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.519 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id,u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from ratings r1_0 join movies m1_0 on m1_0.movie_id=r1_0.movie_id join users u1_0 on u1_0.user_id=r1_0.user_id where u1_0.user_id=? order by r1_0.created_at desc
2025-10-30 11:39:09.570 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:39:09.572 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.574 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.575 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.576 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.577 [main] DEBUG org.hibernate.SQL - select count(r1_0.rating_id) from ratings r1_0 join movies m1_0 on m1_0.movie_id=r1_0.movie_id where m1_0.movie_id=?
2025-10-30 11:39:09.593 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.594 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:39:09.595 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.598 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 join users u1_0 on u1_0.user_id=r1_0.user_id join movies m1_0 on m1_0.movie_id=r1_0.movie_id where u1_0.user_id=? and m1_0.movie_id=?
2025-10-30 11:39:09.616 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:39:09.618 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.619 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.620 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.620 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.621 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.622 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:39:09.623 [main] DEBUG org.hibernate.SQL - select avg(r1_0.rating_value) from ratings r1_0 where r1_0.movie_id=?
2025-10-30 11:39:09.636 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:39:09.638 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:39:09.639 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23502
2025-10-30 11:39:09.639 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: null value in column "director" of relation "movies" violates not-null constraint
  Detail: Failing row contains (f687a533-119b-497c-86ee-e83f3a8dedab, Unique Movie, null, null, null, null, 2025-10-30 11:39:09.638221, 2025-10-30 11:39:09.638237).
2025-10-30 11:39:09.921 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:39:09.923 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown initiated...
2025-10-30 11:39:09.924 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown completed.
2025-10-30 11:39:22.821 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-30 11:39:22.850 [main] INFO  c.s.m.d.r.RatingRepositoryTest - Starting RatingRepositoryTest using Java 21.0.8 with PID 122570 (started by g-hailemariam in /home/g-hailemariam/Desktop/personel-projects/movie-rating-service)
2025-10-30 11:39:22.851 [main] DEBUG c.s.m.d.r.RatingRepositoryTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 11:39:22.851 [main] INFO  c.s.m.d.r.RatingRepositoryTest - The following 1 profile is active: "test"
2025-10-30 11:39:23.192 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 11:39:23.246 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 3 JPA repository interfaces.
2025-10-30 11:39:23.382 [main] WARN  o.s.c.a.AnnotationConfigApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine suitable jdbc url
2025-10-30 11:39:23.390 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-10-30 11:39:23.405 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine suitable jdbc url


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (the profiles test are currently active).

2025-10-30 11:39:23.409 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.sky.movieratingservice.domain.repository.RatingRepositoryTest@55c57422]
java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@4cdba2ed testClass = com.sky.movieratingservice.domain.repository.RatingRepositoryTest, locations = [], classes = [com.sky.movieratingservice.MovieRatingServiceApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@2c1f8dbd key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.testcontainers.service.connection.ServiceConnectionAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60129b9a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3d9c13b5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@363a52f, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a4add54, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3abada5a, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@16dfabfe, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@ab7395e, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@19aa2405], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:66)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine suitable jdbc url
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:328)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:973)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:144)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1461)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:563)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:110)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 78 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine suitable jdbc url
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:315)
	... 93 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine suitable jdbc url
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 103 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine suitable jdbc url
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1708)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$DependencyObjectProvider.getIfUnique(DefaultListableBeanFactory.java:2604)
	at org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration$LiquibaseConfiguration.liquibase(LiquibaseAutoConfiguration.java:107)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 106 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine suitable jdbc url
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 121 common frames omitted
Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine suitable jdbc url
	at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineUrl(DataSourceProperties.java:236)
	at org.springframework.boot.autoconfigure.jdbc.PropertiesJdbcConnectionDetails.getJdbcUrl(PropertiesJdbcConnectionDetails.java:44)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:64)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:127)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 124 common frames omitted
2025-10-30 11:39:23.433 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.sky.movieratingservice.domain.repository.RatingRepositoryTest@549ac12c]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@4cdba2ed testClass = com.sky.movieratingservice.domain.repository.RatingRepositoryTest, locations = [], classes = [com.sky.movieratingservice.MovieRatingServiceApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@2c1f8dbd key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.testcontainers.service.connection.ServiceConnectionAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60129b9a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3d9c13b5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@363a52f, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a4add54, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3abada5a, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@16dfabfe, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@ab7395e, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@19aa2405], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:66)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2025-10-30 11:39:23.437 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.sky.movieratingservice.domain.repository.RatingRepositoryTest@1cb9ef52]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@4cdba2ed testClass = com.sky.movieratingservice.domain.repository.RatingRepositoryTest, locations = [], classes = [com.sky.movieratingservice.MovieRatingServiceApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@2c1f8dbd key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.testcontainers.service.connection.ServiceConnectionAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60129b9a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3d9c13b5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@363a52f, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a4add54, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3abada5a, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@16dfabfe, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@ab7395e, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@19aa2405], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:66)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2025-10-30 11:39:23.441 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.sky.movieratingservice.domain.repository.RatingRepositoryTest@58f31629]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@4cdba2ed testClass = com.sky.movieratingservice.domain.repository.RatingRepositoryTest, locations = [], classes = [com.sky.movieratingservice.MovieRatingServiceApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@2c1f8dbd key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.testcontainers.service.connection.ServiceConnectionAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60129b9a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3d9c13b5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@363a52f, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a4add54, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3abada5a, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@16dfabfe, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@ab7395e, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@19aa2405], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:66)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2025-10-30 11:39:23.445 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.sky.movieratingservice.domain.repository.RatingRepositoryTest@415d88de]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@4cdba2ed testClass = com.sky.movieratingservice.domain.repository.RatingRepositoryTest, locations = [], classes = [com.sky.movieratingservice.MovieRatingServiceApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@2c1f8dbd key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.testcontainers.service.connection.ServiceConnectionAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60129b9a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3d9c13b5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@363a52f, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a4add54, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3abada5a, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@16dfabfe, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@ab7395e, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@19aa2405], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:66)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2025-10-30 11:39:23.449 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.sky.movieratingservice.domain.repository.RatingRepositoryTest@4a89ef44]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@4cdba2ed testClass = com.sky.movieratingservice.domain.repository.RatingRepositoryTest, locations = [], classes = [com.sky.movieratingservice.MovieRatingServiceApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@2c1f8dbd key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.testcontainers.service.connection.ServiceConnectionAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60129b9a, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3d9c13b5, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.reactor.netty.DisableReactorResourceFactoryGlobalResourcesContextCustomizerFactory$DisableReactorResourceFactoryGlobalResourcesContextCustomizerCustomizer@363a52f, org.springframework.boot.test.autoconfigure.OnFailureConditionReportContextCustomizerFactory$OnFailureConditionReportContextCustomizer@a4add54, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@3abada5a, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@16dfabfe, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@ab7395e, org.springframework.test.context.support.DynamicPropertiesContextCustomizer@0, org.springframework.boot.testcontainers.service.connection.ServiceConnectionContextCustomizer@0, org.springframework.boot.test.context.SpringBootTestAnnotation@19aa2405], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:155)
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:111)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:159)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:388)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:382)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1708)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:293)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:292)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:281)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:27)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:112)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:111)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:128)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1596)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:160)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:146)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:144)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:143)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:100)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:201)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:170)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:94)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:59)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:142)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.InterceptingLauncher.lambda$execute$1(InterceptingLauncher.java:39)
	at org.junit.platform.launcher.core.ClasspathAlignmentCheckingLauncherInterceptor.intercept(ClasspathAlignmentCheckingLauncherInterceptor.java:25)
	at org.junit.platform.launcher.core.InterceptingLauncher.execute(InterceptingLauncher.java:38)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:63)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:66)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:231)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2025-10-30 11:48:19.145 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-10-30 11:48:19.172 [main] INFO  c.s.m.a.c.RatingControllerTest - Starting RatingControllerTest using Java 21.0.8 with PID 123974 (started by g-hailemariam in /home/g-hailemariam/Desktop/personel-projects/movie-rating-service)
2025-10-30 11:48:19.172 [main] DEBUG c.s.m.a.c.RatingControllerTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 11:48:19.173 [main] INFO  c.s.m.a.c.RatingControllerTest - The following 1 profile is active: "test"
2025-10-30 11:48:19.631 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 11:48:19.661 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 22 ms. Found 3 JPA repository interfaces.
2025-10-30 11:48:20.383 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Starting...
2025-10-30 11:48:20.502 [main] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingTestHikariPool - Added connection org.postgresql.jdbc.PgConnection@3dad8bde
2025-10-30 11:48:20.503 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Start completed.
2025-10-30 11:48:20.600 [main] INFO  liquibase.database - Set default schema name to public
2025-10-30 11:48:20.830 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
2025-10-30 11:48:20.857 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:20.915 [main] INFO  liquibase.snapshot - Creating snapshot
2025-10-30 11:48:21.002 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-10-30 11:48:21.003 [main] INFO  liquibase.command - Using deploymentId: 1821300371
2025-10-30 11:48:21.004 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:21.029 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam
2025-10-30 11:48:21.037 [main] INFO  liquibase.changelog - Table users created
2025-10-30 11:48:21.038 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam ran successfully in 9ms
2025-10-30 11:48:21.043 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam
2025-10-30 11:48:21.050 [main] INFO  liquibase.changelog - Table movies created
2025-10-30 11:48:21.051 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam ran successfully in 7ms
2025-10-30 11:48:21.055 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam
2025-10-30 11:48:21.060 [main] INFO  liquibase.changelog - Table ratings created
2025-10-30 11:48:21.065 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (user_id)
2025-10-30 11:48:21.069 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (movie_id)
2025-10-30 11:48:21.069 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam ran successfully in 14ms
2025-10-30 11:48:21.073 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam
2025-10-30 11:48:21.076 [main] INFO  liquibase.changelog - Index idx_users_email created
2025-10-30 11:48:21.078 [main] INFO  liquibase.changelog - Index idx_users_created_at created
2025-10-30 11:48:21.080 [main] INFO  liquibase.changelog - Index idx_movies_name created
2025-10-30 11:48:21.082 [main] INFO  liquibase.changelog - Index idx_movies_release_year created
2025-10-30 11:48:21.083 [main] INFO  liquibase.changelog - Index idx_ratings_user_id created
2025-10-30 11:48:21.086 [main] INFO  liquibase.changelog - Index idx_ratings_movie_id created
2025-10-30 11:48:21.088 [main] INFO  liquibase.changelog - Index idx_rating_movie_rating created
2025-10-30 11:48:21.090 [main] INFO  liquibase.changelog - Index idx_rating_created_at created
2025-10-30 11:48:21.090 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam ran successfully in 17ms
2025-10-30 11:48:21.093 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam
2025-10-30 11:48:21.096 [main] INFO  liquibase.changelog - Unique constraint added to ratings(user_id, movie_id)
2025-10-30 11:48:21.105 [main] INFO  liquibase.changelog - Custom SQL executed
2025-10-30 11:48:21.106 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam ran successfully in 13ms
2025-10-30 11:48:21.109 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam
2025-10-30 11:48:21.111 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:21.113 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:21.114 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:21.114 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:21.120 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam
2025-10-30 11:48:21.123 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:21.124 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:21.125 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:21.126 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:21.127 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:21.128 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam ran successfully in 7ms
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - Run:                          7
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - Previously run:               0
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - Filtered out:                 1
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - -------------------------------
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - Total change sets:            8
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-10-30 11:48:21.134 [main] INFO  liquibase.util - Context mismatch:             1
2025-10-30 11:48:21.135 [main] INFO  liquibase.util - Update summary generated
2025-10-30 11:48:21.137 [main] INFO  liquibase.command - Update command completed successfully.
2025-10-30 11:48:21.138 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 15
2025-10-30 11:48:21.140 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-10-30 11:48:21.141 [main] INFO  liquibase.command - Command execution complete
2025-10-30 11:48:21.703 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 11:48:21.735 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.33.Final
2025-10-30 11:48:21.755 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 11:48:21.910 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 11:48:21.957 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingTestHikariPool)']
	Database driver: undefined/unknown
	Database version: 17.6
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 11:48:22.516 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 11:48:22.517 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:22.786 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 11:48:22.818 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-10-30 11:48:23.853 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-10-30 11:48:23.936 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 11:48:24.259 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 11:48:24.260 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-10-30 11:48:24.261 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-10-30 11:48:24.262 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-10-30 11:48:24.315 [main] INFO  c.s.m.a.c.RatingControllerTest - Started RatingControllerTest in 5.402 seconds (process running for 8.344)
2025-10-30 11:48:24.684 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:24.691 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:24.695 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:24.758 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: rater@example.com
2025-10-30 11:48:24.798 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:25.049 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@6c0f23e1
2025-10-30 11:48:25.262 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:25.266 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:25.471 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:25.533 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:25.543 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/ratings
2025-10-30 11:48:25.565 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:25.568 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: rater@example.com
2025-10-30 11:48:25.569 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/ratings
2025-10-30 11:48:25.583 [main] INFO  c.s.m.service.impl.RatingService - Create or update rating RatingRequestDto(movieId=123e4567-e89b-12d3-a456-426614174000, ratingValue=9, review=Excellent movie!)
2025-10-30 11:48:25.584 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:25.586 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0 where m1_0.movie_id=?
2025-10-30 11:48:25.593 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 join users u1_0 on u1_0.user_id=r1_0.user_id join movies m1_0 on m1_0.movie_id=r1_0.movie_id where u1_0.user_id=? and m1_0.movie_id=?
2025-10-30 11:48:25.597 [main] INFO  c.s.m.service.impl.RatingService - Creating new rating
2025-10-30 11:48:25.600 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:25.638 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:25.639 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:25.639 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:25.641 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: deleter@example.com
2025-10-30 11:48:25.642 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:25.845 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@7eae35a2
2025-10-30 11:48:25.847 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:25.849 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:26.051 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:26.074 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:26.078 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:26.081 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:26.084 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/ratings/6ec0e32a-7153-4f6c-b921-e8c7d43e5ea7
2025-10-30 11:48:26.086 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:26.088 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: deleter@example.com
2025-10-30 11:48:26.089 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/ratings/6ec0e32a-7153-4f6c-b921-e8c7d43e5ea7
2025-10-30 11:48:26.092 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 where r1_0.rating_id=?
2025-10-30 11:48:26.098 [main] INFO  c.s.m.service.impl.RatingService - Deleting rating with ID 6ec0e32a-7153-4f6c-b921-e8c7d43e5ea7
2025-10-30 11:48:26.099 [main] DEBUG org.hibernate.SQL - delete from ratings where rating_id=?
2025-10-30 11:48:26.104 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/ratings/my
2025-10-30 11:48:26.106 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:26.108 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: deleter@example.com
2025-10-30 11:48:26.108 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/ratings/my
2025-10-30 11:48:26.110 [main] INFO  c.s.m.service.impl.RatingService - Get all movie ratings for User 3251193a-2cf6-4c4d-98ed-738e44ece256
2025-10-30 11:48:26.118 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id,u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from ratings r1_0 join movies m1_0 on m1_0.movie_id=r1_0.movie_id join users u1_0 on u1_0.user_id=r1_0.user_id where u1_0.user_id=? order by r1_0.created_at desc
2025-10-30 11:48:26.136 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:26.137 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:26.137 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:26.139 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: validator@example.com
2025-10-30 11:48:26.140 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:26.343 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@41148b01
2025-10-30 11:48:26.345 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:26.346 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:26.546 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:26.551 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:26.555 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/ratings
2025-10-30 11:48:26.557 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:26.559 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: validator@example.com
2025-10-30 11:48:26.561 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/ratings
2025-10-30 11:48:26.567 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.sky.movieratingservice.api.dto.response.RatingResponseDto> com.sky.movieratingservice.api.controller.RatingController.createOrUpdateRating(com.sky.movieratingservice.api.dto.request.RatingRequestDto,com.sky.movieratingservice.security.UserPrincipal): [Field error in object 'ratingRequestDto' on field 'ratingValue': rejected value [11]; codes [Max.ratingRequestDto.ratingValue,Max.ratingValue,Max.java.lang.Integer,Max]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [ratingRequestDto.ratingValue,ratingValue]; arguments []; default message [ratingValue],10]; default message [Rating value must be at most 10]] 
2025-10-30 11:48:26.583 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:26.583 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:26.584 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:26.586 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: specific@example.com
2025-10-30 11:48:26.587 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:26.789 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@5fa5dc92
2025-10-30 11:48:26.790 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:26.792 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:26.992 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:26.997 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:27.000 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:27.003 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:27.005 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/ratings/my/movie/123e4567-e89b-12d3-a456-426614174000
2025-10-30 11:48:27.007 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:27.008 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: specific@example.com
2025-10-30 11:48:27.008 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/ratings/my/movie/123e4567-e89b-12d3-a456-426614174000
2025-10-30 11:48:27.010 [main] INFO  c.s.m.service.impl.RatingService - Get user rating for Movie 123e4567-e89b-12d3-a456-426614174000 and User de573268-ef85-4ef3-97d4-99392ee672f0
2025-10-30 11:48:27.011 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 join users u1_0 on u1_0.user_id=r1_0.user_id join movies m1_0 on m1_0.movie_id=r1_0.movie_id where u1_0.user_id=? and m1_0.movie_id=?
2025-10-30 11:48:27.013 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0 where m1_0.movie_id=?
2025-10-30 11:48:27.014 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:27.022 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:27.022 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:27.023 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:27.024 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: updater@example.com
2025-10-30 11:48:27.025 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:27.229 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@67e2f838
2025-10-30 11:48:27.231 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:27.232 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:27.432 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:27.437 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:27.440 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:27.475 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:27.477 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/ratings
2025-10-30 11:48:27.479 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:27.481 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: updater@example.com
2025-10-30 11:48:27.481 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/ratings
2025-10-30 11:48:27.483 [main] INFO  c.s.m.service.impl.RatingService - Create or update rating RatingRequestDto(movieId=123e4567-e89b-12d3-a456-426614174000, ratingValue=8, review=Actually, it's great!)
2025-10-30 11:48:27.483 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:27.485 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0 where m1_0.movie_id=?
2025-10-30 11:48:27.487 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 join users u1_0 on u1_0.user_id=r1_0.user_id join movies m1_0 on m1_0.movie_id=r1_0.movie_id where u1_0.user_id=? and m1_0.movie_id=?
2025-10-30 11:48:27.489 [main] INFO  c.s.m.service.impl.RatingService - Updating Existing rating with ID 9dbbe36a-6b24-429c-8d7b-bd2b94ecc22e
2025-10-30 11:48:27.493 [main] DEBUG org.hibernate.SQL - update ratings set movie_id=?,rating_value=?,review=?,updated_at=?,user_id=? where rating_id=?
2025-10-30 11:48:27.503 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:27.504 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:27.504 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:27.506 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: nonexist@example.com
2025-10-30 11:48:27.507 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:27.708 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@1d070725
2025-10-30 11:48:27.710 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:27.711 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:27.911 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:27.916 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/ratings
2025-10-30 11:48:27.917 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:27.919 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: nonexist@example.com
2025-10-30 11:48:27.920 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/ratings
2025-10-30 11:48:27.921 [main] INFO  c.s.m.service.impl.RatingService - Create or update rating RatingRequestDto(movieId=cbb0fd1a-6141-48c1-be02-cbc77b690eab, ratingValue=8, review=null)
2025-10-30 11:48:27.922 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:27.923 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0 where m1_0.movie_id=?
2025-10-30 11:48:27.925 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Resource not found: Movie not found with movieId: 'cbb0fd1a-6141-48c1-be02-cbc77b690eab'
2025-10-30 11:48:27.933 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:27.933 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:27.934 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:27.935 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: user1@example.com
2025-10-30 11:48:27.936 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:28.139 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@262f0b08
2025-10-30 11:48:28.141 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:28.142 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:28.342 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:28.346 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:28.347 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:28.347 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:28.349 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: user2@example.com
2025-10-30 11:48:28.350 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:28.549 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@3b8afdbf
2025-10-30 11:48:28.551 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:28.552 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:28.752 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:28.757 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:28.759 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:28.762 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:28.765 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/v1/ratings/e9e2adb0-d26b-460d-a9ff-cd8610e86f99
2025-10-30 11:48:28.767 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:28.769 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: user2@example.com
2025-10-30 11:48:28.769 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/v1/ratings/e9e2adb0-d26b-460d-a9ff-cd8610e86f99
2025-10-30 11:48:28.771 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 where r1_0.rating_id=?
2025-10-30 11:48:28.773 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Forbidden access: You can only delete your own ratings
2025-10-30 11:48:28.780 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:28.783 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/ratings
2025-10-30 11:48:28.784 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:28.786 [main] ERROR c.s.m.s.JwtAuthenticationEntryPoint - Unauthorized error: Full authentication is required to access this resource
2025-10-30 11:48:28.793 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:28.793 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:28.794 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:28.795 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: norating@example.com
2025-10-30 11:48:28.797 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:28.998 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@3efe1450
2025-10-30 11:48:29.000 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:29.001 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:29.201 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:29.206 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:29.209 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/ratings/my/movie/123e4567-e89b-12d3-a456-426614174000
2025-10-30 11:48:29.211 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:29.212 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: norating@example.com
2025-10-30 11:48:29.212 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/ratings/my/movie/123e4567-e89b-12d3-a456-426614174000
2025-10-30 11:48:29.213 [main] INFO  c.s.m.service.impl.RatingService - Get user rating for Movie 123e4567-e89b-12d3-a456-426614174000 and User 7f487f05-1190-4bed-a197-40815a1dceaf
2025-10-30 11:48:29.214 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 join users u1_0 on u1_0.user_id=r1_0.user_id join movies m1_0 on m1_0.movie_id=r1_0.movie_id where u1_0.user_id=? and m1_0.movie_id=?
2025-10-30 11:48:29.216 [main] INFO  c.s.m.service.impl.RatingService - No rating found for Movie 123e4567-e89b-12d3-a456-426614174000 and User 7f487f05-1190-4bed-a197-40815a1dceaf
2025-10-30 11:48:29.216 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Resource not found: Rating not found with movieId: '123e4567-e89b-12d3-a456-426614174000'
2025-10-30 11:48:29.223 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:29.223 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:29.223 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:29.225 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: myratings@example.com
2025-10-30 11:48:29.226 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:29.426 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@2b3d74d5
2025-10-30 11:48:29.428 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:29.429 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:29.628 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:29.633 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:29.635 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:29.636 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:29.638 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:29.639 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:29.641 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/ratings/my
2025-10-30 11:48:29.642 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:29.644 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: myratings@example.com
2025-10-30 11:48:29.644 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/ratings/my
2025-10-30 11:48:29.645 [main] INFO  c.s.m.service.impl.RatingService - Get all movie ratings for User 0dc7f440-db48-4568-8bc6-f2f5ce9ec243
2025-10-30 11:48:29.646 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id,u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from ratings r1_0 join movies m1_0 on m1_0.movie_id=r1_0.movie_id join users u1_0 on u1_0.user_id=r1_0.user_id where u1_0.user_id=? order by r1_0.created_at desc
2025-10-30 11:48:29.973 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.sky.movieratingservice.api.controller.AuthControllerTest]: AuthControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-30 11:48:29.979 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.sky.movieratingservice.MovieRatingServiceApplication for test class com.sky.movieratingservice.api.controller.AuthControllerTest
2025-10-30 11:48:29.986 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:29.987 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown initiated...
2025-10-30 11:48:29.989 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown completed.
2025-10-30 11:48:29.991 [main] INFO  tc.postgres:17-alpine - Creating container for image: postgres:17-alpine
2025-10-30 11:48:30.027 [main] INFO  tc.postgres:17-alpine - Container postgres:17-alpine is starting: ee10a9cb28a6a10d2bde3d8127a4dcc54c5fe999cf48f011d62fd2887876ea65
2025-10-30 11:48:31.414 [main] INFO  tc.postgres:17-alpine - Container postgres:17-alpine started in PT1.423027445S
2025-10-30 11:48:31.414 [main] INFO  tc.postgres:17-alpine - Container is started (JDBC URL: jdbc:postgresql://localhost:32804/movierating?loggerLevel=OFF)
2025-10-30 11:48:31.419 [main] INFO  o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-10-30 11:48:31.442 [main] INFO  c.s.m.a.c.AuthControllerTest - Starting AuthControllerTest using Java 21.0.8 with PID 123974 (started by g-hailemariam in /home/g-hailemariam/Desktop/personel-projects/movie-rating-service)
2025-10-30 11:48:31.443 [main] DEBUG c.s.m.a.c.AuthControllerTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 11:48:31.443 [main] INFO  c.s.m.a.c.AuthControllerTest - The following 1 profile is active: "test"
2025-10-30 11:48:31.596 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 11:48:31.603 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 4 ms. Found 3 JPA repository interfaces.
2025-10-30 11:48:31.732 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Starting...
2025-10-30 11:48:31.750 [main] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingTestHikariPool - Added connection org.postgresql.jdbc.PgConnection@365ebc58
2025-10-30 11:48:31.750 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Start completed.
2025-10-30 11:48:31.757 [main] INFO  liquibase.database - Set default schema name to public
2025-10-30 11:48:31.772 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
2025-10-30 11:48:31.779 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:31.802 [main] INFO  liquibase.snapshot - Creating snapshot
2025-10-30 11:48:31.818 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-10-30 11:48:31.819 [main] INFO  liquibase.command - Using deploymentId: 1821300371
2025-10-30 11:48:31.819 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:31.825 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam
2025-10-30 11:48:31.831 [main] INFO  liquibase.changelog - Table users created
2025-10-30 11:48:31.831 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:31.834 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam
2025-10-30 11:48:31.838 [main] INFO  liquibase.changelog - Table movies created
2025-10-30 11:48:31.838 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam ran successfully in 4ms
2025-10-30 11:48:31.840 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam
2025-10-30 11:48:31.844 [main] INFO  liquibase.changelog - Table ratings created
2025-10-30 11:48:31.847 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (user_id)
2025-10-30 11:48:31.849 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (movie_id)
2025-10-30 11:48:31.849 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam ran successfully in 9ms
2025-10-30 11:48:31.851 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam
2025-10-30 11:48:31.853 [main] INFO  liquibase.changelog - Index idx_users_email created
2025-10-30 11:48:31.854 [main] INFO  liquibase.changelog - Index idx_users_created_at created
2025-10-30 11:48:31.856 [main] INFO  liquibase.changelog - Index idx_movies_name created
2025-10-30 11:48:31.857 [main] INFO  liquibase.changelog - Index idx_movies_release_year created
2025-10-30 11:48:31.858 [main] INFO  liquibase.changelog - Index idx_ratings_user_id created
2025-10-30 11:48:31.859 [main] INFO  liquibase.changelog - Index idx_ratings_movie_id created
2025-10-30 11:48:31.860 [main] INFO  liquibase.changelog - Index idx_rating_movie_rating created
2025-10-30 11:48:31.861 [main] INFO  liquibase.changelog - Index idx_rating_created_at created
2025-10-30 11:48:31.861 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam ran successfully in 10ms
2025-10-30 11:48:31.863 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam
2025-10-30 11:48:31.865 [main] INFO  liquibase.changelog - Unique constraint added to ratings(user_id, movie_id)
2025-10-30 11:48:31.867 [main] INFO  liquibase.changelog - Custom SQL executed
2025-10-30 11:48:31.868 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:31.870 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam
2025-10-30 11:48:31.872 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:31.872 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:31.873 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:31.873 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam ran successfully in 3ms
2025-10-30 11:48:31.876 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam
2025-10-30 11:48:31.878 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:31.878 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:31.879 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:31.880 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:31.881 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:31.881 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - Run:                          7
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - Previously run:               0
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - Filtered out:                 1
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - -------------------------------
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - Total change sets:            8
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - Context mismatch:             1
2025-10-30 11:48:31.883 [main] INFO  liquibase.util - Update summary generated
2025-10-30 11:48:31.883 [main] INFO  liquibase.command - Update command completed successfully.
2025-10-30 11:48:31.883 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 15
2025-10-30 11:48:31.884 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-10-30 11:48:31.885 [main] INFO  liquibase.command - Command execution complete
2025-10-30 11:48:31.897 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 11:48:31.899 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 11:48:31.904 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 11:48:31.906 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingTestHikariPool)']
	Database driver: undefined/unknown
	Database version: 17.6
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 11:48:31.937 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 11:48:31.937 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:31.980 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 11:48:32.132 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-10-30 11:48:32.147 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 11:48:32.214 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 11:48:32.214 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-10-30 11:48:32.214 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-10-30 11:48:32.215 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-10-30 11:48:32.228 [main] INFO  c.s.m.a.c.AuthControllerTest - Started AuthControllerTest in 0.809 seconds (process running for 16.257)
2025-10-30 11:48:32.236 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:32.239 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:32.240 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:32.241 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:32.248 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: test@test.com
2025-10-30 11:48:32.249 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:32.253 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Duplicate resource: User already exists with email: 'test@test.com'
2025-10-30 11:48:32.482 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:32.486 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/login
2025-10-30 11:48:32.486 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:32.487 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/login
2025-10-30 11:48:32.490 [main] INFO  c.s.m.service.impl.AuthService - login request  with email: login@example.com
2025-10-30 11:48:32.693 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:32.894 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:32.896 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:33.109 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:33.110 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:33.110 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:33.112 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: newuser@user.com
2025-10-30 11:48:33.113 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:33.318 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@7365754d
2025-10-30 11:48:33.319 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:33.321 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:33.524 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:33.733 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:33.736 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/login
2025-10-30 11:48:33.736 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:33.736 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/login
2025-10-30 11:48:33.738 [main] INFO  c.s.m.service.impl.AuthService - login request  with email: wrongpass@example.com
2025-10-30 11:48:33.739 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:33.941 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-10-30 11:48:33.942 [main] DEBUG o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2025-10-30 11:48:33.943 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Bad credentials: Bad credentials
2025-10-30 11:48:33.949 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:33.950 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:33.950 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:33.951 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Validation error: Validation failed for argument [0] in public org.springframework.http.ResponseEntity<com.sky.movieratingservice.api.dto.response.AuthResponseDto> com.sky.movieratingservice.api.controller.AuthController.register(com.sky.movieratingservice.api.dto.request.UserRegistrationRequestDto) with 2 errors: [Field error in object 'userRegistrationRequestDto' on field 'password': rejected value [weak]; codes [Size.userRegistrationRequestDto.password,Size.password,Size.java.lang.String,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userRegistrationRequestDto.password,password]; arguments []; default message [password],100,8]; default message [Password must be between 8 and 100 characters]] [Field error in object 'userRegistrationRequestDto' on field 'password': rejected value [weak]; codes [Pattern.userRegistrationRequestDto.password,Pattern.password,Pattern.java.lang.String,Pattern]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [userRegistrationRequestDto.password,password]; arguments []; default message [password],[Ljakarta.validation.constraints.Pattern$Flag;@6f1f937,^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$]; default message [Password must contain at least one uppercase letter, one lowercase letter, one digit, and one special character]] 
2025-10-30 11:48:33.959 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/login
2025-10-30 11:48:33.960 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:33.960 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/login
2025-10-30 11:48:33.961 [main] INFO  c.s.m.service.impl.AuthService - login request  with email: nonexistent@example.com
2025-10-30 11:48:33.962 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:34.167 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to find user 'nonexistent@example.com'
2025-10-30 11:48:34.167 [main] DEBUG o.s.s.authentication.ProviderManager - Authentication failed with provider DaoAuthenticationProvider since Bad credentials
2025-10-30 11:48:34.168 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Bad credentials: Bad credentials
2025-10-30 11:48:34.424 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.sky.movieratingservice.api.controller.MovieControllerTest]: MovieControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-30 11:48:34.428 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.sky.movieratingservice.MovieRatingServiceApplication for test class com.sky.movieratingservice.api.controller.MovieControllerTest
2025-10-30 11:48:34.431 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:34.432 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown initiated...
2025-10-30 11:48:34.433 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown completed.
2025-10-30 11:48:34.433 [main] INFO  tc.postgres:17-alpine - Creating container for image: postgres:17-alpine
2025-10-30 11:48:34.471 [main] INFO  tc.postgres:17-alpine - Container postgres:17-alpine is starting: 8abb8e3bf262d4f79655079de22233c130784fe306704ce7d970ae20881303e2
2025-10-30 11:48:35.903 [main] INFO  tc.postgres:17-alpine - Container postgres:17-alpine started in PT1.470274128S
2025-10-30 11:48:35.904 [main] INFO  tc.postgres:17-alpine - Container is started (JDBC URL: jdbc:postgresql://localhost:32805/movierating?loggerLevel=OFF)
2025-10-30 11:48:35.908 [main] INFO  o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-10-30 11:48:35.924 [main] INFO  c.s.m.a.c.MovieControllerTest - Starting MovieControllerTest using Java 21.0.8 with PID 123974 (started by g-hailemariam in /home/g-hailemariam/Desktop/personel-projects/movie-rating-service)
2025-10-30 11:48:35.924 [main] DEBUG c.s.m.a.c.MovieControllerTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 11:48:35.924 [main] INFO  c.s.m.a.c.MovieControllerTest - The following 1 profile is active: "test"
2025-10-30 11:48:36.031 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 11:48:36.035 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 3 JPA repository interfaces.
2025-10-30 11:48:36.134 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Starting...
2025-10-30 11:48:36.150 [main] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingTestHikariPool - Added connection org.postgresql.jdbc.PgConnection@222178f2
2025-10-30 11:48:36.150 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Start completed.
2025-10-30 11:48:36.155 [main] INFO  liquibase.database - Set default schema name to public
2025-10-30 11:48:36.166 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
2025-10-30 11:48:36.171 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:36.191 [main] INFO  liquibase.snapshot - Creating snapshot
2025-10-30 11:48:36.207 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-10-30 11:48:36.208 [main] INFO  liquibase.command - Using deploymentId: 1821300371
2025-10-30 11:48:36.208 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:36.214 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam
2025-10-30 11:48:36.218 [main] INFO  liquibase.changelog - Table users created
2025-10-30 11:48:36.219 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:36.221 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam
2025-10-30 11:48:36.224 [main] INFO  liquibase.changelog - Table movies created
2025-10-30 11:48:36.225 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam ran successfully in 4ms
2025-10-30 11:48:36.226 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam
2025-10-30 11:48:36.229 [main] INFO  liquibase.changelog - Table ratings created
2025-10-30 11:48:36.232 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (user_id)
2025-10-30 11:48:36.233 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (movie_id)
2025-10-30 11:48:36.233 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam ran successfully in 7ms
2025-10-30 11:48:36.235 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam
2025-10-30 11:48:36.237 [main] INFO  liquibase.changelog - Index idx_users_email created
2025-10-30 11:48:36.238 [main] INFO  liquibase.changelog - Index idx_users_created_at created
2025-10-30 11:48:36.239 [main] INFO  liquibase.changelog - Index idx_movies_name created
2025-10-30 11:48:36.240 [main] INFO  liquibase.changelog - Index idx_movies_release_year created
2025-10-30 11:48:36.241 [main] INFO  liquibase.changelog - Index idx_ratings_user_id created
2025-10-30 11:48:36.242 [main] INFO  liquibase.changelog - Index idx_ratings_movie_id created
2025-10-30 11:48:36.243 [main] INFO  liquibase.changelog - Index idx_rating_movie_rating created
2025-10-30 11:48:36.244 [main] INFO  liquibase.changelog - Index idx_rating_created_at created
2025-10-30 11:48:36.244 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam ran successfully in 9ms
2025-10-30 11:48:36.246 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam
2025-10-30 11:48:36.248 [main] INFO  liquibase.changelog - Unique constraint added to ratings(user_id, movie_id)
2025-10-30 11:48:36.249 [main] INFO  liquibase.changelog - Custom SQL executed
2025-10-30 11:48:36.249 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam ran successfully in 3ms
2025-10-30 11:48:36.251 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam
2025-10-30 11:48:36.253 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:36.254 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:36.254 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:36.255 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam ran successfully in 4ms
2025-10-30 11:48:36.257 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam
2025-10-30 11:48:36.260 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:36.260 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:36.261 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:36.261 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:36.262 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:36.262 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam ran successfully in 4ms
2025-10-30 11:48:36.263 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 11:48:36.263 [main] INFO  liquibase.util - Run:                          7
2025-10-30 11:48:36.264 [main] INFO  liquibase.util - Previously run:               0
2025-10-30 11:48:36.264 [main] INFO  liquibase.util - Filtered out:                 1
2025-10-30 11:48:36.264 [main] INFO  liquibase.util - -------------------------------
2025-10-30 11:48:36.264 [main] INFO  liquibase.util - Total change sets:            8
2025-10-30 11:48:36.264 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-10-30 11:48:36.264 [main] INFO  liquibase.util - Context mismatch:             1
2025-10-30 11:48:36.264 [main] INFO  liquibase.util - Update summary generated
2025-10-30 11:48:36.264 [main] INFO  liquibase.command - Update command completed successfully.
2025-10-30 11:48:36.264 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 15
2025-10-30 11:48:36.265 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-10-30 11:48:36.265 [main] INFO  liquibase.command - Command execution complete
2025-10-30 11:48:36.276 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 11:48:36.277 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 11:48:36.282 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 11:48:36.284 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingTestHikariPool)']
	Database driver: undefined/unknown
	Database version: 17.6
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 11:48:36.316 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 11:48:36.317 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:36.357 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 11:48:36.469 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-10-30 11:48:36.484 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 11:48:36.554 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-30 11:48:36.554 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-10-30 11:48:36.554 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-10-30 11:48:36.555 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-10-30 11:48:36.574 [main] INFO  c.s.m.a.c.MovieControllerTest - Started MovieControllerTest in 0.666 seconds (process running for 20.603)
2025-10-30 11:48:36.580 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:36.583 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/movies/123e4567-e89b-12d3-a456-426614174000
2025-10-30 11:48:36.584 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:36.584 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/movies/123e4567-e89b-12d3-a456-426614174000
2025-10-30 11:48:36.589 [main] DEBUG c.s.m.service.impl.MovieService - Fetching movie details for ID: 123e4567-e89b-12d3-a456-426614174000
2025-10-30 11:48:36.589 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0 where m1_0.movie_id=?
2025-10-30 11:48:36.595 [main] DEBUG org.hibernate.SQL - select avg(r1_0.rating_value) from ratings r1_0 where r1_0.movie_id=?
2025-10-30 11:48:36.600 [main] DEBUG org.hibernate.SQL - select count(r1_0.rating_id) from ratings r1_0 join movies m1_0 on m1_0.movie_id=r1_0.movie_id where m1_0.movie_id=?
2025-10-30 11:48:36.614 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:36.617 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0
2025-10-30 11:48:36.620 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:36.620 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:36.621 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:36.625 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: movie@movie.com
2025-10-30 11:48:36.626 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:36.831 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@2e0c2e84
2025-10-30 11:48:37.035 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:37.036 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:37.237 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:37.243 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:37.246 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:37.249 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:37.251 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:37.252 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/movies/top-rated
2025-10-30 11:48:37.253 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:37.253 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/movies/top-rated
2025-10-30 11:48:37.254 [main] DEBUG c.s.m.service.impl.MovieService - Fetching top rated movies
2025-10-30 11:48:37.262 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.name,m1_0.description,m1_0.release_year,m1_0.genre,m1_0.director,avg(r1_0.rating_value),count(r1_0.rating_id) from movies m1_0 join ratings r1_0 on m1_0.movie_id=r1_0.movie_id group by m1_0.movie_id,m1_0.name,m1_0.description,m1_0.release_year,m1_0.genre,m1_0.director having count(r1_0.rating_id)>=? order by 7 desc,8 desc fetch first ? rows only
2025-10-30 11:48:37.267 [main] DEBUG org.hibernate.SQL - select count(m1_0.movie_id) from movies m1_0 join ratings r1_0 on m1_0.movie_id=r1_0.movie_id group by m1_0.movie_id,m1_0.name,m1_0.description,m1_0.release_year,m1_0.genre,m1_0.director having count(r1_0.rating_id)>=?
2025-10-30 11:48:37.280 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/movies
2025-10-30 11:48:37.280 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:37.281 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/movies
2025-10-30 11:48:37.284 [main] DEBUG c.s.m.service.impl.MovieService - Fetching all movies - page: 0, size: 10
2025-10-30 11:48:37.287 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0 order by m1_0.name offset ? rows fetch first ? rows only
2025-10-30 11:48:37.302 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/movies
2025-10-30 11:48:37.303 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:37.303 [main] ERROR c.s.m.s.JwtAuthenticationEntryPoint - Unauthorized error: Full authentication is required to access this resource
2025-10-30 11:48:37.306 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/auth/register
2025-10-30 11:48:37.306 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:37.307 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/auth/register
2025-10-30 11:48:37.308 [main] INFO  c.s.m.service.impl.AuthService - Registering user with email: createmovie@movie.com
2025-10-30 11:48:37.309 [main] DEBUG org.hibernate.SQL - select u1_0.user_id from users u1_0 where u1_0.email=? fetch first ? rows only
2025-10-30 11:48:37.514 [main] INFO  c.s.m.service.impl.AuthService - User registered successfully com.sky.movieratingservice.domain.entity.User@23be198a
2025-10-30 11:48:37.516 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:37.517 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.email=?
2025-10-30 11:48:37.720 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-10-30 11:48:37.724 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/v1/movies
2025-10-30 11:48:37.726 [main] DEBUG org.hibernate.SQL - select u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from users u1_0 where u1_0.user_id=?
2025-10-30 11:48:37.728 [main] DEBUG c.s.m.s.JwtAuthenticationFilter - Set authentication for user: createmovie@movie.com
2025-10-30 11:48:37.728 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/v1/movies
2025-10-30 11:48:37.734 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.sky.movieratingservice.api.controller.MovieController.createMovie(com.sky.movieratingservice.api.dto.request.CreateMovieRequestDto); target is of class [com.sky.movieratingservice.api.controller.MovieController]
2025-10-30 11:48:37.739 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.sky.movieratingservice.api.controller.MovieController.createMovie(com.sky.movieratingservice.api.dto.request.CreateMovieRequestDto); target is of class [com.sky.movieratingservice.api.controller.MovieController]
2025-10-30 11:48:37.740 [main] DEBUG c.s.m.service.impl.MovieService - Creating new movie: CreateMovieRequestDto(name=Test Movie, description=Test Description, genre=Drama, director=Test Director, releaseYear=1900)
2025-10-30 11:48:37.741 [main] DEBUG c.s.m.service.impl.MovieService - Movie created: com.sky.movieratingservice.domain.entity.Movie@7122f715
2025-10-30 11:48:37.742 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:48:37.749 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/movies/584faccf-222a-45bc-b3e1-199e9eee7b82
2025-10-30 11:48:37.749 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:37.749 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/movies/584faccf-222a-45bc-b3e1-199e9eee7b82
2025-10-30 11:48:37.750 [main] DEBUG c.s.m.service.impl.MovieService - Fetching movie details for ID: 584faccf-222a-45bc-b3e1-199e9eee7b82
2025-10-30 11:48:37.750 [main] DEBUG org.hibernate.SQL - select m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at from movies m1_0 where m1_0.movie_id=?
2025-10-30 11:48:37.752 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Resource not found: Movie not found with id: '584faccf-222a-45bc-b3e1-199e9eee7b82'
2025-10-30 11:48:37.761 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/movies
2025-10-30 11:48:37.761 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:37.762 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/movies
2025-10-30 11:48:37.767 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Constraint violation: getAllMovies.page: must be greater than or equal to 0, getAllMovies.size: must be greater than or equal to 1
2025-10-30 11:48:37.774 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/v1/movies
2025-10-30 11:48:37.774 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-10-30 11:48:37.774 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/v1/movies
2025-10-30 11:48:37.776 [main] ERROR c.s.m.a.e.GlobalExceptionHandler - Constraint violation: getAllMovies.size: must be less than or equal to 100
2025-10-30 11:48:38.018 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.sky.movieratingservice.domain.repository.RatingRepositoryTest]: RatingRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-30 11:48:38.031 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.sky.movieratingservice.MovieRatingServiceApplication for test class com.sky.movieratingservice.domain.repository.RatingRepositoryTest
2025-10-30 11:48:38.032 [main] INFO  tc.postgres:15-alpine - Creating container for image: postgres:15-alpine
2025-10-30 11:48:38.033 [main] WARN  tc.postgres:15-alpine - Reuse was requested but the environment does not support the reuse of containers
To enable reuse of containers, you must set 'testcontainers.reuse.enable=true' in a file located at /home/g-hailemariam/.testcontainers.properties
2025-10-30 11:48:38.067 [main] INFO  tc.postgres:15-alpine - Container postgres:15-alpine is starting: 380852dba10e0ae4ae08d2568178e40fd648dbf7bc4173f93ed6c0cb4ade8f97
2025-10-30 11:48:39.392 [main] INFO  tc.postgres:15-alpine - Container postgres:15-alpine started in PT1.359301356S
2025-10-30 11:48:39.392 [main] INFO  tc.postgres:15-alpine - Container is started (JDBC URL: jdbc:postgresql://localhost:32806/movierating_test?loggerLevel=OFF)
2025-10-30 11:48:39.396 [main] INFO  o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-10-30 11:48:39.407 [main] INFO  c.s.m.d.r.RatingRepositoryTest - Starting RatingRepositoryTest using Java 21.0.8 with PID 123974 (started by g-hailemariam in /home/g-hailemariam/Desktop/personel-projects/movie-rating-service)
2025-10-30 11:48:39.407 [main] DEBUG c.s.m.d.r.RatingRepositoryTest - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 11:48:39.407 [main] INFO  c.s.m.d.r.RatingRepositoryTest - The following 1 profile is active: "test"
2025-10-30 11:48:39.443 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 11:48:39.450 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 3 JPA repository interfaces.
2025-10-30 11:48:39.467 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Starting...
2025-10-30 11:48:39.481 [main] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingTestHikariPool - Added connection org.postgresql.jdbc.PgConnection@1cc923e
2025-10-30 11:48:39.481 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Start completed.
2025-10-30 11:48:39.486 [main] INFO  liquibase.database - Set default schema name to public
2025-10-30 11:48:39.496 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
2025-10-30 11:48:39.501 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:39.516 [main] INFO  liquibase.snapshot - Creating snapshot
2025-10-30 11:48:39.531 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-10-30 11:48:39.531 [main] INFO  liquibase.command - Using deploymentId: 1821300371
2025-10-30 11:48:39.532 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:39.538 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam
2025-10-30 11:48:39.543 [main] INFO  liquibase.changelog - Table users created
2025-10-30 11:48:39.543 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:39.545 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam
2025-10-30 11:48:39.549 [main] INFO  liquibase.changelog - Table movies created
2025-10-30 11:48:39.550 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam ran successfully in 4ms
2025-10-30 11:48:39.552 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam
2025-10-30 11:48:39.555 [main] INFO  liquibase.changelog - Table ratings created
2025-10-30 11:48:39.558 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (user_id)
2025-10-30 11:48:39.560 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (movie_id)
2025-10-30 11:48:39.560 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam ran successfully in 8ms
2025-10-30 11:48:39.562 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam
2025-10-30 11:48:39.564 [main] INFO  liquibase.changelog - Index idx_users_email created
2025-10-30 11:48:39.565 [main] INFO  liquibase.changelog - Index idx_users_created_at created
2025-10-30 11:48:39.565 [main] INFO  liquibase.changelog - Index idx_movies_name created
2025-10-30 11:48:39.566 [main] INFO  liquibase.changelog - Index idx_movies_release_year created
2025-10-30 11:48:39.567 [main] INFO  liquibase.changelog - Index idx_ratings_user_id created
2025-10-30 11:48:39.568 [main] INFO  liquibase.changelog - Index idx_ratings_movie_id created
2025-10-30 11:48:39.569 [main] INFO  liquibase.changelog - Index idx_rating_movie_rating created
2025-10-30 11:48:39.570 [main] INFO  liquibase.changelog - Index idx_rating_created_at created
2025-10-30 11:48:39.570 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam ran successfully in 8ms
2025-10-30 11:48:39.571 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam
2025-10-30 11:48:39.573 [main] INFO  liquibase.changelog - Unique constraint added to ratings(user_id, movie_id)
2025-10-30 11:48:39.575 [main] INFO  liquibase.changelog - Custom SQL executed
2025-10-30 11:48:39.575 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam ran successfully in 3ms
2025-10-30 11:48:39.577 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam
2025-10-30 11:48:39.578 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:39.579 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:39.579 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:39.580 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam ran successfully in 3ms
2025-10-30 11:48:39.582 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam
2025-10-30 11:48:39.584 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:39.584 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:39.585 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:39.585 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:39.586 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:39.586 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam ran successfully in 4ms
2025-10-30 11:48:39.587 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 11:48:39.587 [main] INFO  liquibase.util - Run:                          7
2025-10-30 11:48:39.587 [main] INFO  liquibase.util - Previously run:               0
2025-10-30 11:48:39.587 [main] INFO  liquibase.util - Filtered out:                 1
2025-10-30 11:48:39.588 [main] INFO  liquibase.util - -------------------------------
2025-10-30 11:48:39.588 [main] INFO  liquibase.util - Total change sets:            8
2025-10-30 11:48:39.588 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-10-30 11:48:39.588 [main] INFO  liquibase.util - Context mismatch:             1
2025-10-30 11:48:39.588 [main] INFO  liquibase.util - Update summary generated
2025-10-30 11:48:39.588 [main] INFO  liquibase.command - Update command completed successfully.
2025-10-30 11:48:39.588 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 15
2025-10-30 11:48:39.589 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-10-30 11:48:39.589 [main] INFO  liquibase.command - Command execution complete
2025-10-30 11:48:39.596 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 11:48:39.597 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 11:48:39.601 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 11:48:39.602 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingTestHikariPool)']
	Database driver: undefined/unknown
	Database version: 15.14
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 11:48:39.626 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 11:48:39.627 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:39.661 [main] INFO  c.s.m.d.r.RatingRepositoryTest - Started RatingRepositoryTest in 0.265 seconds (process running for 23.69)
2025-10-30 11:48:39.710 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.712 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:48:39.713 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:48:39.713 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.715 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.716 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,m1_0.movie_id,m1_0.created_at,m1_0.description,m1_0.director,m1_0.genre,m1_0.name,m1_0.release_year,m1_0.updated_at,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id,u1_0.user_id,u1_0.created_at,u1_0.email,u1_0.password,u1_0.updated_at from ratings r1_0 join movies m1_0 on m1_0.movie_id=r1_0.movie_id join users u1_0 on u1_0.user_id=r1_0.user_id where u1_0.user_id=? order by r1_0.created_at desc
2025-10-30 11:48:39.726 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:48:39.727 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.727 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.727 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.728 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.729 [main] DEBUG org.hibernate.SQL - select count(r1_0.rating_id) from ratings r1_0 join movies m1_0 on m1_0.movie_id=r1_0.movie_id where m1_0.movie_id=?
2025-10-30 11:48:39.736 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.738 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:48:39.738 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.739 [main] DEBUG org.hibernate.SQL - select r1_0.rating_id,r1_0.created_at,r1_0.movie_id,r1_0.rating_value,r1_0.review,r1_0.updated_at,r1_0.user_id from ratings r1_0 join users u1_0 on u1_0.user_id=r1_0.user_id join movies m1_0 on m1_0.movie_id=r1_0.movie_id where u1_0.user_id=? and m1_0.movie_id=?
2025-10-30 11:48:39.750 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:48:39.751 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.752 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.752 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.752 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.753 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.754 [main] DEBUG org.hibernate.SQL - insert into ratings (created_at,movie_id,rating_value,review,updated_at,user_id,rating_id) values (?,?,?,?,?,?,?)
2025-10-30 11:48:39.754 [main] DEBUG org.hibernate.SQL - select avg(r1_0.rating_value) from ratings r1_0 where r1_0.movie_id=?
2025-10-30 11:48:39.763 [main] DEBUG org.hibernate.SQL - insert into users (created_at,email,password,updated_at,user_id) values (?,?,?,?,?)
2025-10-30 11:48:39.764 [main] DEBUG org.hibernate.SQL - insert into movies (created_at,description,director,genre,name,release_year,updated_at,movie_id) values (?,?,?,?,?,?,?,?)
2025-10-30 11:48:39.765 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 0, SQLState: 23502
2025-10-30 11:48:39.765 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - ERROR: null value in column "director" of relation "movies" violates not-null constraint
  Detail: Failing row contains (ce6b9669-7931-4b70-821f-c30dee2601a6, Unique Movie, null, null, null, null, 2025-10-30 11:48:39.764153, 2025-10-30 11:48:39.764164).
2025-10-30 11:48:40.022 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.sky.movieratingservice.MovieRatingServiceApplicationTests]: MovieRatingServiceApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-10-30 11:48:40.028 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.sky.movieratingservice.MovieRatingServiceApplication for test class com.sky.movieratingservice.MovieRatingServiceApplicationTests
2025-10-30 11:48:40.032 [main] INFO  o.s.b.d.r.RestartApplicationListener - Restart disabled due to context in which it is running
2025-10-30 11:48:40.043 [main] INFO  c.s.m.MovieRatingServiceApplicationTests - Starting MovieRatingServiceApplicationTests using Java 21.0.8 with PID 123974 (started by g-hailemariam in /home/g-hailemariam/Desktop/personel-projects/movie-rating-service)
2025-10-30 11:48:40.043 [main] DEBUG c.s.m.MovieRatingServiceApplicationTests - Running with Spring Boot v3.5.7, Spring v6.2.12
2025-10-30 11:48:40.043 [main] INFO  c.s.m.MovieRatingServiceApplicationTests - No active profile set, falling back to 1 default profile: "default"
2025-10-30 11:48:40.124 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-10-30 11:48:40.127 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 2 ms. Found 3 JPA repository interfaces.
2025-10-30 11:48:40.215 [main] INFO  tc.postgres:latest - Creating container for image: postgres:latest
2025-10-30 11:48:40.263 [main] INFO  tc.postgres:latest - Container postgres:latest is starting: 2625f47e0c480aed7aac372d79b842551abe4e233321eb41b54be1718f0f7a1d
2025-10-30 11:48:41.461 [main] INFO  tc.postgres:latest - Container postgres:latest started in PT1.246055325S
2025-10-30 11:48:41.461 [main] INFO  tc.postgres:latest - Container is started (JDBC URL: jdbc:postgresql://localhost:32807/test?loggerLevel=OFF)
2025-10-30 11:48:41.504 [main] INFO  liquibase.database - Set default schema name to public
2025-10-30 11:48:41.511 [main] INFO  liquibase.changelog - Creating database history table with name: public.databasechangelog
2025-10-30 11:48:41.515 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:41.527 [main] INFO  liquibase.snapshot - Creating snapshot
2025-10-30 11:48:41.539 [main] INFO  liquibase.lockservice - Successfully acquired change log lock
2025-10-30 11:48:41.539 [main] INFO  liquibase.command - Using deploymentId: 1821300371
2025-10-30 11:48:41.539 [main] INFO  liquibase.changelog - Reading from public.databasechangelog
2025-10-30 11:48:41.544 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam
2025-10-30 11:48:41.546 [main] INFO  liquibase.changelog - Table users created
2025-10-30 11:48:41.547 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/001-create-user-table.yaml::001-create-user-table::g.hailemariam ran successfully in 3ms
2025-10-30 11:48:41.548 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam
2025-10-30 11:48:41.550 [main] INFO  liquibase.changelog - Table movies created
2025-10-30 11:48:41.551 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/002-create-movie-table.yaml::002-create-movie-rating-table::g.hailemariam ran successfully in 2ms
2025-10-30 11:48:41.552 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam
2025-10-30 11:48:41.555 [main] INFO  liquibase.changelog - Table ratings created
2025-10-30 11:48:41.556 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (user_id)
2025-10-30 11:48:41.557 [main] INFO  liquibase.changelog - Foreign key constraint added to ratings (movie_id)
2025-10-30 11:48:41.557 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/003-create-rating-table.yaml::003-create-rating-table::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:41.558 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam
2025-10-30 11:48:41.559 [main] INFO  liquibase.changelog - Index idx_users_email created
2025-10-30 11:48:41.560 [main] INFO  liquibase.changelog - Index idx_users_created_at created
2025-10-30 11:48:41.560 [main] INFO  liquibase.changelog - Index idx_movies_name created
2025-10-30 11:48:41.561 [main] INFO  liquibase.changelog - Index idx_movies_release_year created
2025-10-30 11:48:41.561 [main] INFO  liquibase.changelog - Index idx_ratings_user_id created
2025-10-30 11:48:41.562 [main] INFO  liquibase.changelog - Index idx_ratings_movie_id created
2025-10-30 11:48:41.562 [main] INFO  liquibase.changelog - Index idx_rating_movie_rating created
2025-10-30 11:48:41.562 [main] INFO  liquibase.changelog - Index idx_rating_created_at created
2025-10-30 11:48:41.563 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/004-create-index.yaml::004-create-index::g.hailemariam ran successfully in 5ms
2025-10-30 11:48:41.564 [main] INFO  liquibase.ui - Running Changeset: db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam
2025-10-30 11:48:41.565 [main] INFO  liquibase.changelog - Unique constraint added to ratings(user_id, movie_id)
2025-10-30 11:48:41.567 [main] INFO  liquibase.changelog - Custom SQL executed
2025-10-30 11:48:41.567 [main] INFO  liquibase.changelog - ChangeSet db/changelog/changes/v1.0/005-add-constraints.yaml::005-add-constraints::g.hailemariam ran successfully in 3ms
2025-10-30 11:48:41.568 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam
2025-10-30 11:48:41.569 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:41.570 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:41.570 [main] INFO  liquibase.changelog - New row inserted into users
2025-10-30 11:48:41.570 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-test-users.yaml::seed-test-users::g.hailemariam ran successfully in 2ms
2025-10-30 11:48:41.572 [main] INFO  liquibase.ui - Running Changeset: db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam
2025-10-30 11:48:41.572 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:41.573 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:41.573 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:41.574 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:41.574 [main] INFO  liquibase.changelog - New row inserted into movies
2025-10-30 11:48:41.574 [main] INFO  liquibase.changelog - ChangeSet db/changelog/data/seed-movies.yaml::seed-movies::g.hailemariam ran successfully in 2ms
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - UPDATE SUMMARY
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - Run:                          7
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - Previously run:               0
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - Filtered out:                 1
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - -------------------------------
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - Total change sets:            8
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - FILTERED CHANGE SETS SUMMARY
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - Context mismatch:             1
2025-10-30 11:48:41.575 [main] INFO  liquibase.util - Update summary generated
2025-10-30 11:48:41.575 [main] INFO  liquibase.command - Update command completed successfully.
2025-10-30 11:48:41.575 [main] INFO  liquibase.ui - Liquibase: Update has been successful. Rows affected: 15
2025-10-30 11:48:41.576 [main] INFO  liquibase.lockservice - Successfully released change log lock
2025-10-30 11:48:41.576 [main] INFO  liquibase.command - Command execution complete
2025-10-30 11:48:41.586 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Starting...
2025-10-30 11:48:41.594 [main] INFO  com.zaxxer.hikari.pool.HikariPool - MovieRatingTestHikariPool - Added connection org.postgresql.jdbc.PgConnection@763db7ac
2025-10-30 11:48:41.594 [main] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Start completed.
2025-10-30 11:48:41.594 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-30 11:48:41.596 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-30 11:48:41.600 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-10-30 11:48:41.603 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (MovieRatingTestHikariPool)']
	Database driver: undefined/unknown
	Database version: 18.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-30 11:48:41.629 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-30 11:48:41.629 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:41.665 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailService
2025-10-30 11:48:41.827 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint beneath base path '/actuator'
2025-10-30 11:48:41.840 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-10-30 11:48:41.912 [main] INFO  c.s.m.MovieRatingServiceApplicationTests - Started MovieRatingServiceApplicationTests in 1.88 seconds (process running for 25.941)
2025-10-30 11:48:42.406 [main] INFO  c.s.m.service.impl.RatingService - Deleting rating with ID 7c16fe16-5897-455d-b887-40c9616a6fe6
2025-10-30 11:48:42.418 [main] INFO  c.s.m.service.impl.RatingService - Create or update rating RatingRequestDto(movieId=5589a72f-d711-40e2-bd67-d04010918d7f, ratingValue=9, review=null)
2025-10-30 11:48:42.425 [main] INFO  c.s.m.service.impl.RatingService - Create or update rating RatingRequestDto(movieId=d46b3530-63a1-42a7-8bee-b0dc5047362c, ratingValue=9, review=Changed my mind!)
2025-10-30 11:48:42.425 [main] INFO  c.s.m.service.impl.RatingService - Updating Existing rating with ID 08aaf80c-d028-44b6-b7a3-dac8a7b122d1
2025-10-30 11:48:42.432 [main] INFO  c.s.m.service.impl.RatingService - Create or update rating RatingRequestDto(movieId=cea9d358-60fd-47b9-a683-eba6712465cb, ratingValue=9, review=null)
2025-10-30 11:48:42.436 [main] INFO  c.s.m.service.impl.RatingService - Create or update rating RatingRequestDto(movieId=981dae75-f08c-4820-8261-9f583ca8f800, ratingValue=9, review=Great!)
2025-10-30 11:48:42.437 [main] INFO  c.s.m.service.impl.RatingService - Creating new rating
2025-10-30 11:48:42.518 [main] DEBUG c.s.m.service.impl.MovieService - Fetching movie details for ID: 48078af4-2102-4a93-bfc6-9430e2d216db
2025-10-30 11:48:42.522 [main] DEBUG c.s.m.service.impl.MovieService - Fetching movie details for ID: 20fe77e9-976b-4fee-a00d-7bbccd3f903e
2025-10-30 11:48:42.538 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:42.538 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown initiated...
2025-10-30 11:48:42.539 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown completed.
2025-10-30 11:48:42.541 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:42.541 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown initiated...
2025-10-30 11:48:42.542 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown completed.
2025-10-30 11:48:42.546 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-10-30 11:48:42.546 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown initiated...
2025-10-30 11:48:42.547 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - MovieRatingTestHikariPool - Shutdown completed.
